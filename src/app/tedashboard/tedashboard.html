<div class = "banner">
    
     <div class = "bannertext"> {{UserName.UserFirst}}'s Dashboard 
      
     </div>
     <img src="assets/ToolingLogo.png" class="banner-profile">
     
</div>
<div class = "Screen">
    
    <div class ="Sidebar">
        SideBar
        <div class = "BacklogDesign"> <button matTooltip = "Backlog Project List" mat-icon-button (click) = "toBacklogDesign()" ><mat-icon class = "backlogDesignicon" >featured_play_list</mat-icon></button></div>
    </div>
        <div class ="Project-Container">
            
            <mat-accordion class="example-headers-align" multi>

            <!-- Single expansion panel -->
            <mat-expansion-panel [expanded]="true" >
                <mat-expansion-panel-header>
                <mat-panel-title>
                    Design Project List
                </mat-panel-title>
                </mat-expansion-panel-header>

                <!-- All project cards go here -->
                <div class="card-container">
                <div *ngFor="let project of projects" class = "trythis">
                    <mat-card class="example-card" appearance="outlined">
                    <mat-card-header class = "Header">
    
                        <mat-card-title>{{ project.ToolNumber }}</mat-card-title>
                        <mat-card-subtitle>{{ project.ToolDesc }}</mat-card-subtitle>
                        
                        <div> <button matButton class="newUpdate" (click) =RoutetoProjectDashboard(project)>Enter Project</button> </div>
                        
                    </mat-card-header>
                    <mat-card-content class="content">
                        <mat-list class="horizontallist">
                        
                            <mat-list-item>Request ID: {{project.RID}}</mat-list-item>
                            <mat-divider [vertical]="true"></mat-divider>
                            <mat-list-item>Tool Order: {{project.ToolOrder}}</mat-list-item>
                            <mat-divider [vertical]="true"></mat-divider>
                            <mat-list-item>Purchase Order: {{project.PurchaseOrder}}</mat-list-item>
                            <mat-divider [vertical]="true"></mat-divider>
                            <mat-list-item>Delivery Date: {{project.DeliveryDate}}</mat-list-item>
                            <mat-divider [vertical]="true"></mat-divider>
                        
                        </mat-list>
                        
                    </mat-card-content>
                    <mat-card-actions>
                    </mat-card-actions>
                    <!--Status Update section of Card-->
                            <mat-accordion>
                        <mat-expansion-panel >
                           
                        <mat-expansion-panel-header>
                           
                        <mat-panel-title>
                            Status Updates
                            
                        </mat-panel-title>
                        </mat-expansion-panel-header>
                           <div class="statloop1">
                                <ng-container *ngFor="let Stat of Statusup; let isLast = last">
                                    <div *ngIf="Stat.RID === project.RID" class="Statloop">
                                    <div class="statloopbt">
                                        <div>
                                        <button matButton class="newUpdate">Update</button>
                                        </div>
                                        <div class="textstat">
                                        {{ Stat.DateOnly }}: {{ Stat.StatusUpdate }}
                                        </div>
                                        
                                    </div>
                                    <mat-divider *ngIf="!isLast" class="status-divider"></mat-divider>
                                    </div>
                                </ng-container>
                            </div>
                                
                        <button matButton class= "newUpdate" (click) = "openNewStatusUpdate(NewStatusUpdate, project.RID!)"> New Status</button>
                    </mat-expansion-panel>
                    </mat-accordion>
                    </mat-card>
                </div>
                </div>
            </mat-expansion-panel>

            </mat-accordion>
        </div>
        
</div>

<ng-template #NewStatusUpdate>
    <div class = "textlabels">
       <div class="StatHead"> New Status Update</div>
        <div>
            <mat-form-field class="StatusUPdateNewBox">
                <mat-label></mat-label>
                 <textarea matInput
                [(ngModel)] ="NewStatusUpdateVar"
                placeholder="NewStatusUpdateVar"
                value= "NewStatusUpdateVar"
                cdkTextareaAutosize
                #autosize="cdkTextareaAutosize"
                matTextareaAutosize
                matAutosizeMinRows="3"
                matAutosizeMaxRows="10"
                ></textarea>
            </mat-form-field>
            
        </div>
        </div>
    <mat-dialog-actions>
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-flat-button color="primary" (click) = "SaveStatusUpdate()">Submit</button>

    </mat-dialog-actions>
</ng-template>
